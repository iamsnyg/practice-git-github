name: HTML/CSS/JS Quality & Rating

on: [push, pull_request]

jobs:
  # JOB 1: SYNTAX CHECKER (Pass/Fail)
  # Checks for broken code or bad formatting
  lint:
    name: Syntax Check (HTML/CSS/JS)
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Code
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Run Super-Linter
        uses: super-linter/super-linter@v7
        env:
          # Only check the languages you use
          VALIDATE_HTML: true
          VALIDATE_CSS: true
          VALIDATE_JAVASCRIPT_ES: true
          # Don't fail the build on minor formatting issues (optional)
          DISABLE_ERRORS: false 
          DEFAULT_BRANCH: main
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

  # JOB 2: QUALITY RATING (0-100 Score)
  # Rates your site Performance, Accessibility, & SEO
  rating:
    name: Generate Quality Score
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Audit with Lighthouse CI
        uses: treosh/lighthouse-ci-action@v12
        id: lighthouse_audit
        with:
          configPath: './lighthouserc.json'
          uploadArtifacts: true
          temporaryPublicStorage: true
          
      - name: Show Scores
        run: |
          echo "See the links above for your detailed report and score."
